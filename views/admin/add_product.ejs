<%- include('../_layouts/adminheader.ejs') %>
<table class="table">
  <h2 class="page-title">Add a product</h2>
  <a href="/admin/products" class="btn btn-primary mx-2"
    >Back to all products</a
  >
  <br /><br />

  <form
    method="POST"
    action="/admin/products/add_product"
    enctype="multipart/form-data"
  >
    <div class="form-group">
      <lable for="">Title</lable>
      <input
        type="text"
        class="form-control"
        name="title"
        value="<%= title %>"
        placeholder="Title"
      />
    </div>
    <div class="form-group">
      <lable for="">Description</lable>
      <textarea
        type="text"
        class="form-control"
        id="ta"
        name="desc"
        cols="30"
        rows="10"
        placeholder="Description"
      >
<%=desc %></textarea
      >
    </div>

    <div class="form-group">
      <lable for="">Category</lable>
      <select name="category" class="form-control">
        <% categories.forEach(function(cat){ %>
        <option value="<%= cat.slug %>"><%= cat.title %></option>
        <% }); %>
      </select>
    </div>

    <div class="form-group">
      <lable for="">Price</lable>
      <input
        type="text"
        class="form-control"
        name="price"
        value="<%= price %>"
        placeholder="Price"
      />
    </div>

    <div class="form-group">
      <lable for="">Image</lable>
      <input type="file" class="form-control" name="image" id="img" />
      <img src="#" id="imgPreview" alt="" />
    </div>

    <button class="btn btn-primary mx-2">Submit</button>
  </form>
</table>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script>
  function readUrl(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $(document)
          .ready("#imgPreview")
          .attr("src", e.target.result)
          .width(100)
          .height(100);
      };
      reader.readAsDataURL(input.files[0]);
    }
  }
  $(document)
    .ready("#img")
    .change(function () {
      readUrl(this);
    });
</script>
<%- include('../_layouts/adminfooter.ejs') %>
